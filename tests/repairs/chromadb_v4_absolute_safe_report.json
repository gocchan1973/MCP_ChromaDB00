{
  "analysis_metadata": {
    "timestamp": "2025-06-11T22:29:09.473211",
    "analyzer_version": "1.0.0-absolute-safe",
    "database_path": "F:\\副業\\VSC_WorkSpace\\IrukaWorkspace\\shared__ChromaDB_v4",
    "analysis_type": "comprehensive_5_layer"
  },
  "overall_assessment": {
    "status": "WARNING",
    "score": 78.0,
    "description": "注意が必要",
    "emoji": "⚠️"
  },
  "layer_analysis": {
    "total_layers": 5,
    "completed_layers": 5,
    "results": [
      {
        "layer": "filesystem",
        "status": "excellent",
        "details": {
          "database_exists": true,
          "structure": {
            ".": [
              {
                "name": "chroma.sqlite3",
                "size": 3457024,
                "modified": "2025-06-11T22:13:17.973776"
              }
            ],
            "5dcd33ec-e239-4c0f-8346-7c51aa7acca5": [],
            "9171011f-fb97-4ccf-af12-1607ea265e6d": []
          },
          "total_size_bytes": 3457024,
          "total_size_mb": 3.3,
          "file_count": 1,
          "permissions": {
            "readable": true,
            "writable": true,
            "executable": true
          }
        },
        "score": 100
      },
      {
        "layer": "chromadb_api",
        "status": "excellent",
        "details": {
          "collections_count": 1,
          "collections": [
            {
              "name": "sister_chat_history_v4",
              "id": "96cce9b4-bb93-43d8-842f-129897a9c5d9",
              "metadata": {
                "description": "統合されたIrukaナレッジベース v4",
                "migration_version": "v4.0",
                "created_at": "2025-06-11T21:55:34.658944",
                "rename_timestamp": "2025-06-11T21:55:34.658954",
                "renamed_from": "merged_iruka_knowledge",
                "source_collections": "sister_chat_history, my_sister_context"
              }
            }
          ],
          "main_collection": {
            "name": "sister_chat_history_v4",
            "document_count": 105,
            "metadata": {
              "description": "統合されたIrukaナレッジベース v4",
              "migration_version": "v4.0",
              "created_at": "2025-06-11T21:55:34.658944",
              "rename_timestamp": "2025-06-11T21:55:34.658954",
              "renamed_from": "merged_iruka_knowledge",
              "source_collections": "sister_chat_history, my_sister_context"
            }
          },
          "search_tests": {
            "基本検索": {
              "success": true,
              "result_count": 2,
              "query": "テスト"
            },
            "日本語検索": {
              "success": true,
              "result_count": 2,
              "query": "姉妹"
            },
            "複合検索": {
              "success": true,
              "result_count": 2,
              "query": "会話 システム"
            },
            "英語検索": {
              "success": true,
              "result_count": 2,
              "query": "system"
            },
            "専門用語": {
              "success": true,
              "result_count": 2,
              "query": "人工知能"
            }
          },
          "search_success_rate": 1.0
        },
        "score": 100
      },
      {
        "layer": "sqlite_internal",
        "status": "excellent",
        "details": {
          "sqlite_files": [
            "chroma.sqlite3"
          ],
          "sqlite_file_count": 1,
          "tables": [
            "migrations",
            "acquire_write",
            "collection_metadata",
            "segment_metadata",
            "tenants",
            "databases",
            "collections",
            "maintenance_log",
            "segments",
            "embeddings",
            "embedding_metadata",
            "max_seq_id",
            "embedding_fulltext_search",
            "embedding_fulltext_search_data",
            "embedding_fulltext_search_idx",
            "embedding_fulltext_search_content",
            "embedding_fulltext_search_docsize",
            "embedding_fulltext_search_config",
            "embeddings_queue",
            "embeddings_queue_config"
          ],
          "table_count": 20,
          "indexes": [
            "embedding_metadata_int_value",
            "embedding_metadata_float_value",
            "embedding_metadata_string_value"
          ],
          "index_count": 3,
          "key_tables": {
            "segments": 2,
            "collections": 2,
            "embeddings": 10
          }
        },
        "score": 90
      },
      {
        "layer": "vector_embeddings",
        "status": "failed",
        "details": {
          "embedding_error": "The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()"
        },
        "score": 0
      },
      {
        "layer": "data_integrity",
        "status": "excellent",
        "details": {
          "analyzed_documents": 15,
          "total_documents": 105,
          "analysis_coverage": 14.3,
          "document_analysis": {
            "total": 15,
            "valid": 15,
            "empty": 0,
            "null": 0
          },
          "document_validity_rate": 1.0,
          "metadata_analysis": {
            "total": 15,
            "valid": 15,
            "null": 0,
            "invalid": 0
          },
          "metadata_validity_rate": 1.0,
          "duplicate_count": 0,
          "uniqueness_rate": 1.0,
          "search_integrity": {
            "success_rate": 1.0,
            "successful_tests": 4,
            "total_tests": 4
          }
        },
        "score": 100
      }
    ]
  },
  "summary_metrics": {
    "excellent_layers": 4,
    "good_layers": 0,
    "warning_layers": 0,
    "failed_layers": 1,
    "healthy_percentage": 80.0,
    "critical_percentage": 20.0
  }
}