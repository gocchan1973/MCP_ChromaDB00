{
  "analysis_timestamp": "2025-06-11T22:02:40.255545",
  "database_path": "F:\\ÂâØÊ•≠\\VSC_WorkSpace\\IrukaWorkspace\\shared__ChromaDB_v4",
  "layers": {
    "filesystem": {
      "directory_exists": true,
      "total_files": 3,
      "total_size_mb": 3.3,
      "files": [
        {
          "name": "chroma.sqlite3",
          "size_bytes": 3457024,
          "size_mb": 3.3,
          "modified": "2025-06-11T21:56:28.969406",
          "extension": ".sqlite3",
          "md5_hash": "de591e4774a6702f25db4132f0c8b0dc"
        }
      ],
      "write_permissions": true
    },
    "chromadb_api": {
      "connection_successful": true,
      "collections_count": 1,
      "collections": [
        {
          "name": "sister_chat_history_v4",
          "id": "96cce9b4-bb93-43d8-842f-129897a9c5d9",
          "metadata": {
            "migration_version": "v4.0",
            "created_at": "2025-06-11T21:55:34.658944",
            "description": "Áµ±Âêà„Åï„Çå„ÅüIruka„Éä„É¨„ÉÉ„Ç∏„Éô„Éº„Çπ v4",
            "rename_timestamp": "2025-06-11T21:55:34.658954",
            "renamed_from": "merged_iruka_knowledge",
            "source_collections": "sister_chat_history, my_sister_context"
          },
          "document_count": 105,
          "document_stats": {
            "sample_size": 10,
            "min_length": 23,
            "max_length": 752,
            "avg_length": 407.7
          },
          "metadata_keys": [
            "genres",
            "migration_timestamp",
            "original_id",
            "original_length",
            "source",
            "source_collection",
            "summary_length",
            "timestamp",
            "type",
            "update_reason",
            "updated_timestamp"
          ],
          "search_functional": true,
          "search_results_count": 1,
          "search_distance_stats": {
            "min_distance": 1.7390934228897095,
            "max_distance": 1.7654575109481812,
            "avg_distance": 1.748739242553711
          }
        }
      ]
    },
    "sqlite_internal": {
      "file_exists": true,
      "file_size_mb": 3.3,
      "page_count": 844,
      "page_size": 4096,
      "total_size_mb": 3.3,
      "tables_count": 20,
      "tables": {
        "migrations": {
          "record_count": 16,
          "column_count": 5,
          "columns": [
            {
              "cid": 0,
              "name": "dir",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "version",
              "type": "INTEGER",
              "notnull": true,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 2,
              "name": "filename",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 3,
              "name": "sql",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 4,
              "name": "hash",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "acquire_write": {
          "record_count": 11,
          "column_count": 2,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "lock_status",
              "type": "INTEGER",
              "notnull": true,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "collection_metadata": {
          "record_count": 6,
          "column_count": 6,
          "columns": [
            {
              "cid": 0,
              "name": "collection_id",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "key",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 2,
              "name": "str_value",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 3,
              "name": "int_value",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 4,
              "name": "float_value",
              "type": "REAL",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 5,
              "name": "bool_value",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "segment_metadata": {
          "record_count": 0,
          "column_count": 6,
          "columns": [
            {
              "cid": 0,
              "name": "segment_id",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "key",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 2,
              "name": "str_value",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 3,
              "name": "int_value",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 4,
              "name": "float_value",
              "type": "REAL",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 5,
              "name": "bool_value",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "tenants": {
          "record_count": 1,
          "column_count": 1,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": true
            }
          ]
        },
        "databases": {
          "record_count": 1,
          "column_count": 3,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "name",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 2,
              "name": "tenant_id",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "collections": {
          "record_count": 1,
          "column_count": 5,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "name",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 2,
              "name": "dimension",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 3,
              "name": "database_id",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 4,
              "name": "config_json_str",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ],
          "collection_details": [
            {
              "id": "96cce9b4-bb93-43d8-842f-129897a9c5d9",
              "name": "sister_chat_history_v4",
              "dimension": 384
            }
          ]
        },
        "maintenance_log": {
          "record_count": 0,
          "column_count": 3,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "INT",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "timestamp",
              "type": "INT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 2,
              "name": "operation",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "segments": {
          "record_count": 2,
          "column_count": 4,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "type",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 2,
              "name": "scope",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 3,
              "name": "collection",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "embeddings": {
          "record_count": 210,
          "column_count": 5,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "segment_id",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 2,
              "name": "embedding_id",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 3,
              "name": "seq_id",
              "type": "BLOB",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 4,
              "name": "created_at",
              "type": "TIMESTAMP",
              "notnull": true,
              "default_value": "CURRENT_TIMESTAMP",
              "pk": false
            }
          ],
          "embedding_distribution": [
            {
              "segment_id": "0b1eabc6-946e-4fa9-a44b-2579fbbe5dbe",
              "count": 105
            },
            {
              "segment_id": "fa9202fd-955d-4e85-900b-7bbc13ef24d0",
              "count": 105
            }
          ]
        },
        "embedding_metadata": {
          "record_count": 2250,
          "column_count": 6,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "key",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 2,
              "name": "string_value",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 3,
              "name": "int_value",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 4,
              "name": "float_value",
              "type": "REAL",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 5,
              "name": "bool_value",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ],
          "metadata_key_distribution": [
            {
              "key": "chroma:document",
              "count": 210
            },
            {
              "key": "genres",
              "count": 200
            },
            {
              "key": "migration_timestamp",
              "count": 210
            },
            {
              "key": "original_id",
              "count": 210
            },
            {
              "key": "original_length",
              "count": 200
            },
            {
              "key": "source",
              "count": 10
            },
            {
              "key": "source_collection",
              "count": 210
            },
            {
              "key": "summary_length",
              "count": 200
            },
            {
              "key": "timestamp",
              "count": 200
            },
            {
              "key": "type",
              "count": 200
            }
          ]
        },
        "max_seq_id": {
          "record_count": 2,
          "column_count": 2,
          "columns": [
            {
              "cid": 0,
              "name": "segment_id",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "seq_id",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "embedding_fulltext_search": {
          "record_count": 210,
          "column_count": 1,
          "columns": [
            {
              "cid": 0,
              "name": "string_value",
              "type": "",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "embedding_fulltext_search_data": {
          "record_count": 131,
          "column_count": 2,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "block",
              "type": "BLOB",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "embedding_fulltext_search_idx": {
          "record_count": 129,
          "column_count": 3,
          "columns": [
            {
              "cid": 0,
              "name": "segid",
              "type": "",
              "notnull": true,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "term",
              "type": "",
              "notnull": true,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 2,
              "name": "pgno",
              "type": "",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "embedding_fulltext_search_content": {
          "record_count": 210,
          "column_count": 2,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "c0",
              "type": "",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "embedding_fulltext_search_docsize": {
          "record_count": 210,
          "column_count": 2,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "sz",
              "type": "BLOB",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "embedding_fulltext_search_config": {
          "record_count": 1,
          "column_count": 2,
          "columns": [
            {
              "cid": 0,
              "name": "k",
              "type": "",
              "notnull": true,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "v",
              "type": "",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "embeddings_queue": {
          "record_count": 105,
          "column_count": 8,
          "columns": [
            {
              "cid": 0,
              "name": "seq_id",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "created_at",
              "type": "TIMESTAMP",
              "notnull": true,
              "default_value": "CURRENT_TIMESTAMP",
              "pk": false
            },
            {
              "cid": 2,
              "name": "operation",
              "type": "INTEGER",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 3,
              "name": "topic",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 4,
              "name": "id",
              "type": "TEXT",
              "notnull": true,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 5,
              "name": "vector",
              "type": "BLOB",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 6,
              "name": "encoding",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": false
            },
            {
              "cid": 7,
              "name": "metadata",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ]
        },
        "embeddings_queue_config": {
          "record_count": 1,
          "column_count": 2,
          "columns": [
            {
              "cid": 0,
              "name": "id",
              "type": "INTEGER",
              "notnull": false,
              "default_value": null,
              "pk": true
            },
            {
              "cid": 1,
              "name": "config_json_str",
              "type": "TEXT",
              "notnull": false,
              "default_value": null,
              "pk": false
            }
          ]
        }
      },
      "indexes_count": 3,
      "indexes": [
        {
          "name": "embedding_metadata_int_value",
          "table": "embedding_metadata",
          "sql": "CREATE INDEX embedding_metadata_int_value ON embedding_metadata (key, int_value) WHERE int_value IS NOT NULL"
        },
        {
          "name": "embedding_metadata_float_value",
          "table": "embedding_metadata",
          "sql": "CREATE INDEX embedding_metadata_float_value ON embedding_metadata (key, float_value) WHERE float_value IS NOT NULL"
        },
        {
          "name": "embedding_metadata_string_value",
          "table": "embedding_metadata",
          "sql": "CREATE INDEX embedding_metadata_string_value ON embedding_metadata (key, string_value) WHERE string_value IS NOT NULL"
        }
      ]
    },
    "vector_embeddings": {
      "sister_chat_history_v4": {
        "search_tests": [
          {
            "query": "Python programming",
            "results_count": 1,
            "distances": [
              1.6308482885360718,
              1.766752004623413,
              1.8606541156768799,
              1.8914904594421387,
              1.9039843082427979
            ]
          },
          {
            "query": "„Éá„Éº„Çø„Éô„Éº„ÇπË®≠Ë®à",
            "results_count": 1,
            "distances": [
              0.7434806823730469,
              0.9441252946853638,
              1.0234277248382568,
              1.0778491497039795,
              1.1135270595550537
            ]
          },
          {
            "query": "ÊäÄË°ìÊñáÊõ∏",
            "results_count": 1,
            "distances": [
              1.1802184581756592,
              1.2390336990356445,
              1.30941903591156,
              1.372200608253479,
              1.403266429901123
            ]
          },
          {
            "query": "„Ç∑„Çπ„ÉÜ„É†ÈñãÁô∫",
            "results_count": 1,
            "distances": [
              0.9524600505828857,
              0.9906233549118042,
              1.1707428693771362,
              1.2243207693099976,
              1.2881395816802979
            ]
          }
        ],
        "distance_statistics": {
          "count": 20,
          "min": 0.7434806823730469,
          "max": 1.9039843082427979,
          "mean": 1.3043281972408294,
          "median": 1.2390336990356445
        },
        "similarity_matrix_sample": [
          [
            0.0,
            0.9672573804855347,
            1.023798942565918,
            1.0777729749679565,
            1.1138248443603516
          ],
          [
            0.0,
            0.8403508067131042,
            0.8806332945823669,
            0.8820937871932983,
            0.9246692657470703
          ],
          [
            0.0,
            0.8820937871932983,
            0.9130309820175171,
            0.9240264296531677,
            1.023798942565918
          ],
          [
            0.0,
            0.8403508067131042,
            0.9240264296531677,
            1.014678716659546,
            1.0777729749679565
          ],
          [
            0.7211495637893677,
            0.8111613988876343,
            0.8319731950759888,
            0.8441649675369263,
            0.8495633006095886
          ]
        ],
        "collection_id": "96cce9b4-bb93-43d8-842f-129897a9c5d9",
        "vector_dimension": 384,
        "segments": [
          {
            "id": "9171011f-fb97-4ccf-af12-1607ea265e6d",
            "type": "urn:chroma:segment/vector/hnsw-local-persisted"
          },
          {
            "id": "fa9202fd-955d-4e85-900b-7bbc13ef24d0",
            "type": "urn:chroma:segment/metadata/sqlite"
          }
        ]
      }
    },
    "data_integrity": {
      "sister_chat_history_v4": {
        "id_duplicates": 0,
        "missing_documents": 0,
        "missing_metadata": 0,
        "metadata_consistency": {
          "min_keys": 4,
          "max_keys": 10,
          "avg_keys": 9.714285714285714
        },
        "source_distribution": {
          "my_sister_context": 5,
          "sister_chat_history": 100
        },
        "document_quality_distribution": {
          "very_short": 4,
          "short": 2,
          "medium": 99,
          "long": 0,
          "very_long": 0
        },
        "search_quality_tests": [
          {
            "test": "exact_match",
            "success": true,
            "results_count": 1
          },
          {
            "test": "partial_match",
            "success": true,
            "results_count": 1
          },
          {
            "test": "semantic_search",
            "success": true,
            "results_count": 1
          },
          {
            "test": "long_query",
            "success": true,
            "results_count": 1
          }
        ],
        "quality_score": 100
      }
    }
  },
  "overall_health": {
    "overall_score": 98.0,
    "health_level": "EXCELLENT",
    "health_icon": "üü¢",
    "layer_scores": {
      "filesystem": 100,
      "chromadb_api": 100,
      "sqlite_internal": 90,
      "vector_embeddings": 100,
      "data_integrity": 100.0
    },
    "recommendations": []
  }
}