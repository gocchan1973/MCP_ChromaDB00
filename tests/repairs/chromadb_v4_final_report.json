{
  "analysis_metadata": {
    "timestamp": "2025-06-11T22:13:18.977794",
    "analyzer_version": "1.0.0",
    "database_path": "F:\\副業\\VSC_WorkSpace\\IrukaWorkspace\\shared__ChromaDB_v4",
    "analysis_duration": "complete"
  },
  "overall_assessment": {
    "status": "POOR",
    "score": 58.0,
    "description": "改善が必要",
    "emoji": "🔶"
  },
  "layer_analysis": {
    "total_layers": 5,
    "completed_layers": 3,
    "results": [
      {
        "layer": "filesystem",
        "status": "excellent",
        "details": {
          "database_exists": true,
          "structure": {
            ".": [
              {
                "name": "chroma.sqlite3",
                "size": 3457024,
                "modified": "2025-06-11T22:10:02.346056"
              }
            ],
            "5dcd33ec-e239-4c0f-8346-7c51aa7acca5": [],
            "9171011f-fb97-4ccf-af12-1607ea265e6d": []
          },
          "total_size_bytes": 3457024,
          "total_size_mb": 3.3,
          "file_count": 1,
          "permissions": {
            "readable": true,
            "writable": true,
            "executable": true
          }
        },
        "score": 100
      },
      {
        "layer": "chromadb_api",
        "status": "excellent",
        "details": {
          "collections_count": 1,
          "collections": [
            {
              "name": "sister_chat_history_v4",
              "id": "96cce9b4-bb93-43d8-842f-129897a9c5d9",
              "metadata": {
                "created_at": "2025-06-11T21:55:34.658944",
                "renamed_from": "merged_iruka_knowledge",
                "source_collections": "sister_chat_history, my_sister_context",
                "description": "統合されたIrukaナレッジベース v4",
                "migration_version": "v4.0",
                "rename_timestamp": "2025-06-11T21:55:34.658954"
              }
            }
          ],
          "main_collection": {
            "name": "sister_chat_history_v4",
            "document_count": 105,
            "metadata": {
              "created_at": "2025-06-11T21:55:34.658944",
              "renamed_from": "merged_iruka_knowledge",
              "source_collections": "sister_chat_history, my_sister_context",
              "description": "統合されたIrukaナレッジベース v4",
              "migration_version": "v4.0",
              "rename_timestamp": "2025-06-11T21:55:34.658954"
            }
          },
          "search_tests": {
            "基本検索": {
              "success": true,
              "result_count": 2,
              "query": "テスト"
            },
            "日本語検索": {
              "success": true,
              "result_count": 2,
              "query": "姉妹"
            },
            "複合検索": {
              "success": true,
              "result_count": 2,
              "query": "会話 システム"
            },
            "英語検索": {
              "success": true,
              "result_count": 2,
              "query": "system"
            },
            "長文検索": {
              "success": true,
              "result_count": 2,
              "query": "人工知能システムの機能について"
            }
          },
          "search_success_rate": 1.0
        },
        "score": 100
      },
      {
        "layer": "sqlite_internal",
        "status": "excellent",
        "details": {
          "sqlite_files": [
            "chroma.sqlite3"
          ],
          "sqlite_file_count": 1,
          "tables": [
            "migrations",
            "acquire_write",
            "collection_metadata",
            "segment_metadata",
            "tenants",
            "databases",
            "collections",
            "maintenance_log",
            "segments",
            "embeddings",
            "embedding_metadata",
            "max_seq_id",
            "embedding_fulltext_search",
            "embedding_fulltext_search_data",
            "embedding_fulltext_search_idx",
            "embedding_fulltext_search_content",
            "embedding_fulltext_search_docsize",
            "embedding_fulltext_search_config",
            "embeddings_queue",
            "embeddings_queue_config"
          ],
          "table_count": 20,
          "indexes": [
            "embedding_metadata_int_value",
            "embedding_metadata_float_value",
            "embedding_metadata_string_value"
          ],
          "index_count": 3,
          "views": [],
          "view_count": 0,
          "key_tables": {
            "segments": [
              "segment_metadata",
              "segments"
            ],
            "collections": [
              "collection_metadata",
              "collections"
            ],
            "embeddings": [
              "embeddings",
              "embedding_metadata",
              "embedding_fulltext_search",
              "embedding_fulltext_search_data",
              "embedding_fulltext_search_idx",
              "embedding_fulltext_search_content",
              "embedding_fulltext_search_docsize",
              "embedding_fulltext_search_config",
              "embeddings_queue",
              "embeddings_queue_config"
            ]
          },
          "table_stats": {
            "segment_metadata": {
              "row_count": 0
            },
            "segments": {
              "row_count": 2
            },
            "collection_metadata": {
              "row_count": 6
            },
            "collections": {
              "row_count": 1
            },
            "embeddings": {
              "row_count": 210
            }
          },
          "database_size": {
            "pages": 844,
            "page_size": 4096,
            "total_bytes": 3457024,
            "total_mb": 3.3
          }
        },
        "score": 90
      },
      {
        "layer": "vector_embeddings",
        "status": "failed",
        "details": {
          "error": "Vector analysis failed: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()"
        },
        "score": 0
      },
      {
        "layer": "data_integrity",
        "status": "failed",
        "details": {
          "error": "Expected include item to be one of documents, embeddings, metadatas, distances, uris, data, got ids in get."
        },
        "score": 0
      }
    ]
  },
  "health_metrics": {
    "average_score": 58.0,
    "median_score": 90,
    "min_score": 0,
    "max_score": 100,
    "score_variance": 2256.0,
    "excellent_layers": 3,
    "good_layers": 0,
    "warning_layers": 0,
    "failed_layers": 2,
    "healthy_percentage": 60.0,
    "critical_percentage": 40.0,
    "total_layers": 5,
    "consistency_score": 0
  },
  "technical_summary": {
    "total_size_mb": 3.3,
    "file_count": 1,
    "document_count": 105,
    "collections_count": 1,
    "table_count": 20,
    "index_count": 3,
    "vector_dimensions": 0,
    "search_success_rate": 0,
    "analysis_coverage": 0,
    "document_validity_rate": 0.0
  },
  "recommendations": [
    "ベクター埋め込み層の緊急修復: embedding生成プロセスの見直しが必要",
    "data_integrity層の緊急修復が必要です（スコア: 0）",
    "システム全体の最適化と改善計画の策定が推奨されます",
    "ベクターデータベースの再構築を検討してください"
  ],
  "executive_summary": {
    "overall_health": "Poor",
    "key_strengths": [
      "filesystem",
      "chromadb_api",
      "sqlite_internal"
    ],
    "critical_issues": [
      "vector_embeddings",
      "data_integrity"
    ],
    "immediate_actions_required": 2,
    "system_stability": "Low",
    "recommendation_priority": "High"
  }
}