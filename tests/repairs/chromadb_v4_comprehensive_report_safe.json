{
  "analysis_timestamp": "2025-06-11T22:07:35.727684",
  "database_path": "F:\\副業\\VSC_WorkSpace\\IrukaWorkspace\\shared__ChromaDB_v4",
  "overall_status": "CRITICAL",
  "overall_score": 59.0,
  "layer_count": 5,
  "layer_results": [
    {
      "layer": "filesystem",
      "status": "excellent",
      "details": {
        "database_exists": true,
        "structure": {
          ".": [
            {
              "name": "chroma.sqlite3",
              "size": 3457024,
              "modified": "2025-06-11T22:05:28.864140"
            }
          ],
          "5dcd33ec-e239-4c0f-8346-7c51aa7acca5": [],
          "9171011f-fb97-4ccf-af12-1607ea265e6d": []
        },
        "total_size_bytes": 3457024,
        "total_size_mb": 3.3,
        "file_count": 1,
        "permissions": {
          "readable": true,
          "writable": true,
          "executable": true
        }
      },
      "score": 100
    },
    {
      "layer": "chromadb_api",
      "status": "excellent",
      "details": {
        "collections_count": 1,
        "collections": [
          {
            "name": "sister_chat_history_v4",
            "id": "96cce9b4-bb93-43d8-842f-129897a9c5d9",
            "metadata": {
              "description": "統合されたIrukaナレッジベース v4",
              "migration_version": "v4.0",
              "source_collections": "sister_chat_history, my_sister_context",
              "created_at": "2025-06-11T21:55:34.658944",
              "rename_timestamp": "2025-06-11T21:55:34.658954",
              "renamed_from": "merged_iruka_knowledge"
            }
          }
        ],
        "main_collection": {
          "name": "sister_chat_history_v4",
          "document_count": 105,
          "metadata": {
            "description": "統合されたIrukaナレッジベース v4",
            "migration_version": "v4.0",
            "source_collections": "sister_chat_history, my_sister_context",
            "created_at": "2025-06-11T21:55:34.658944",
            "rename_timestamp": "2025-06-11T21:55:34.658954",
            "renamed_from": "merged_iruka_knowledge"
          }
        },
        "search_test": {
          "success": true,
          "result_count": 1
        }
      },
      "score": 100
    },
    {
      "layer": "sqlite_internal",
      "status": "excellent",
      "details": {
        "sqlite_files": [
          "F:\\副業\\VSC_WorkSpace\\IrukaWorkspace\\shared__ChromaDB_v4\\chroma.sqlite3"
        ],
        "tables": [
          "migrations",
          "acquire_write",
          "collection_metadata",
          "segment_metadata",
          "tenants",
          "databases",
          "collections",
          "maintenance_log",
          "segments",
          "embeddings",
          "embedding_metadata",
          "max_seq_id",
          "embedding_fulltext_search",
          "embedding_fulltext_search_data",
          "embedding_fulltext_search_idx",
          "embedding_fulltext_search_content",
          "embedding_fulltext_search_docsize",
          "embedding_fulltext_search_config",
          "embeddings_queue",
          "embeddings_queue_config"
        ],
        "table_count": 20,
        "indexes": [
          "sqlite_autoindex_migrations_1",
          "sqlite_autoindex_collection_metadata_1",
          "sqlite_autoindex_segment_metadata_1",
          "sqlite_autoindex_tenants_1",
          "sqlite_autoindex_databases_1",
          "sqlite_autoindex_databases_2",
          "sqlite_autoindex_collections_1",
          "sqlite_autoindex_collections_2",
          "sqlite_autoindex_maintenance_log_1",
          "sqlite_autoindex_segments_1",
          "sqlite_autoindex_embeddings_1",
          "sqlite_autoindex_embedding_metadata_1",
          "sqlite_autoindex_max_seq_id_1",
          "embedding_metadata_int_value",
          "embedding_metadata_float_value",
          "embedding_metadata_string_value"
        ],
        "index_count": 16,
        "table_details": {
          "migrations": {
            "row_count": 16
          },
          "acquire_write": {
            "row_count": 13
          },
          "collection_metadata": {
            "row_count": 6
          },
          "segment_metadata": {
            "row_count": 0
          },
          "tenants": {
            "row_count": 1
          },
          "databases": {
            "row_count": 1
          },
          "collections": {
            "row_count": 1
          },
          "maintenance_log": {
            "row_count": 0
          },
          "segments": {
            "row_count": 2
          },
          "embeddings": {
            "row_count": 210
          }
        }
      },
      "score": 95
    },
    {
      "layer": "vector_embeddings",
      "status": "failed",
      "details": {
        "error": "The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()"
      },
      "score": 0
    },
    {
      "layer": "data_integrity",
      "status": "failed",
      "details": {
        "analyzed_documents": 50,
        "total_documents": 105,
        "metadata_issues": 0,
        "metadata_integrity_score": 100,
        "duplicate_count": 0,
        "uniqueness_ratio": 1.0,
        "error": "The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()"
      },
      "score": 0
    }
  ],
  "summary": {
    "status_emoji": "❌",
    "recommendations": [
      "vector_embeddings層の修復が必要です",
      "data_integrity層の修復が必要です"
    ],
    "health_metrics": {
      "average_score": 59.0,
      "min_score": 0,
      "max_score": 100,
      "healthy_layers": 3,
      "critical_layers": 2,
      "total_layers": 5
    }
  }
}