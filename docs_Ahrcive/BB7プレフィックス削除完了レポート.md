# BB7ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹å‰Šé™¤ã¨ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šå®Ÿè£… å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

## ğŸ¯ ä½œæ¥­æ¦‚è¦
**å®Ÿè¡Œæ—¥**: 2025å¹´6æœˆ8æ—¥  
**ä½œæ¥­å†…å®¹**: BB7ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®å‰Šé™¤ã¨ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…

## âœ… å®Œäº†ã—ãŸä½œæ¥­

### 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œå®Œäº†
- âœ… `development_conversations` ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ2æ–‡æ›¸ï¼‰ã‚’ `sister_chat_history` ã«çµ±åˆ
- âœ… ä¸è¦ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³3å€‹ã‚’å‰Šé™¤ï¼š`general_knowledge`, `system_config`, `test_collection`
- âœ… æœ€çµ‚çŠ¶æ…‹ï¼š`sister_chat_history` ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³1å€‹ã€767æ–‡æ›¸

### 2. ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…å®Œäº†
#### ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«
- âœ… `src/config/global_settings.py` - ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šç®¡ç†ã‚¯ãƒ©ã‚¹
- âœ… `src/config/config.json` - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- âœ… `src/utils/config_helper.py` - ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ç¾¤

#### å®Ÿè£…æ©Ÿèƒ½
- âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è¨­å®šï¼š`sister_chat_history`
- âœ… ãƒ„ãƒ¼ãƒ«åç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
- âœ… BB7ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹äº’æ›æ€§ç¶­æŒ
- âœ… ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹è¨­å®šä¸Šæ›¸ãæ©Ÿèƒ½
- âœ… JSONè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œ

### 3. BB7ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹å‰Šé™¤å®Œäº†
#### æ›´æ–°ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«
- âœ… `src/tools/basic_operations.py` - ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šå¯¾å¿œ
- âœ… `src/main_complete.py` - BB7äº’æ›æ€§ã¨ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šçµ±åˆ
- âœ… `src/fastmcp_modular_server.py` - BB7å‚ç…§ã‚’ã‚¯ãƒªãƒ¼ãƒ³ãªãƒ„ãƒ¼ãƒ«åã«æ›´æ–°
- âœ… `docs/ChromaDB_MCP_å®Ÿè·µã‚³ãƒãƒ³ãƒ‰ãƒãƒ‹ãƒ¥ã‚¢ãƒ«.md` - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

#### å¾Œæ–¹äº’æ›æ€§
- âœ… `bb7_store_text` â†’ `store_text`
- âœ… `bb7_search_text` â†’ `search_text` 
- âœ… `bb7_stats` â†’ `stats`
- âœ… æ—§BB7ãƒ„ãƒ¼ãƒ«åã§ã‚‚æ­£å¸¸å‹•ä½œ

### 4. è¨­å®šã‚·ã‚¹ãƒ†ãƒ æ¤œè¨¼å®Œäº†
- âœ… ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã‚¯ãƒ©ã‚¹ãƒ†ã‚¹ãƒˆåˆæ ¼
- âœ… ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ãƒ†ã‚¹ãƒˆåˆæ ¼
- âœ… BB7ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆåˆæ ¼
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çŠ¶æ³ç¢ºèªåˆæ ¼

## ğŸ“Š ç¾åœ¨ã®çŠ¶æ³

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çŠ¶æ…‹
```
ğŸ—„ï¸ ChromaDBçŠ¶æ…‹:
  - ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ•°: 1
  - ç·ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•°: 767
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³: sister_chat_history
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹: f:/å‰¯æ¥­/VSC_WorkSpace/IrukaWorkspace/shared_Chromadb/chromadb_data
```

### è¨­å®šã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹
```
âš™ï¸ ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š:
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³: sister_chat_history
  - ãƒ„ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹: ãªã—ï¼ˆã‚¯ãƒªãƒ¼ãƒ³ãªåå‰ï¼‰
  - å¾Œæ–¹äº’æ›æ€§: æœ‰åŠ¹
  - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«: æ­£å¸¸å‹•ä½œ
```

### ãƒ„ãƒ¼ãƒ«åå¤‰æ›´çŠ¶æ³
```
ğŸ”§ ãƒ„ãƒ¼ãƒ«åãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³:
  Before (BB7) â†’ After (Clean)
  - bb7_store_text â†’ store_text
  - bb7_search_text â†’ search_text
  - bb7_stats â†’ stats
  - bb7_health_check â†’ health_check
```

## ğŸŒ ã‚°ãƒ­ãƒ¼ãƒãƒ«åŒ–ã®å…·ä½“çš„å®Ÿè£…

### 1. è¨­å®šã®å¤–éƒ¨åŒ–å®Ÿè£…
#### ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é™¤å»ä¾‹
```python
# Before (ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°)
collection_name = "sister_chat_history"
db_path = "f:/å‰¯æ¥­/VSC_WorkSpace/IrukaWorkspace/shared_Chromadb/chromadb_data"

# After (ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š)
from src.utils.config_helper import get_default_collection
from src.config.global_settings import GlobalSettings

settings = GlobalSettings()
collection_name = get_default_collection()
db_path = settings.get_database_path()
```

### 2. ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹å‹•çš„è¨­å®š
```bash
# ç’°å¢ƒå¤‰æ•°ã§ã®è¨­å®šå¤‰æ›´
$env:MCP_DEFAULT_COLLECTION = "custom_collection"
$env:MCP_DATABASE_PATH = "C:\custom\path\chromadb_data"
```

### 3. JSONè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
**`src/config/config.json`**:
```json
{
  "default_collection": {
    "name": "sister_chat_history"
  },
  "tool_naming": {
    "prefix": "",
    "separator": "_"
  },
  "database": {
    "path": "f:/å‰¯æ¥­/VSC_WorkSpace/IrukaWorkspace/shared_Chromadb/chromadb_data"
  }
}
```

## ğŸ—„ï¸ ã‚·ã‚§ã‚¢ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…

### å…±æœ‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆ
- **çµ±ä¸€ãƒ‘ã‚¹**: `f:/å‰¯æ¥­/VSC_WorkSpace/IrukaWorkspace/shared_Chromadb/chromadb_data`
- **ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚º**: 33.8MBå®Ÿé‹ç”¨ãƒ‡ãƒ¼ã‚¿
- **ã‚¢ã‚¯ã‚»ã‚¹æ–¹å¼**: è¤‡æ•°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹å¯¾å¿œ

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–“çµ±åˆ
```python
# å…±æœ‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®çµ±ä¸€ã‚¢ã‚¯ã‚»ã‚¹
SHARED_DB_PATH = "f:/å‰¯æ¥­/VSC_WorkSpace/IrukaWorkspace/shared_Chromadb/chromadb_data"

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–“ã§ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªãƒ‡ãƒ¼ã‚¿å…±æœ‰
# - MySisterDB ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
# - IrukaProjectII ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ  
# - MCP_ChromaDB00 ãƒ¡ã‚¤ãƒ³ç®¡ç†
```

## ğŸ“¦ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ§‹æˆã®è©³ç´°

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (17ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸)
```pip-requirements
mcp>=1.0.0                    # Model Context Protocol Core
chromadb==1.0.12              # ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆå›ºå®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
numpy>=2.2.0                  # æ•°å€¤è¨ˆç®—ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆæœ€æ–°ç‰ˆï¼‰
google-generativeai>=0.3.0    # Google Gemini API
langchain>=0.1.0              # LangChain ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
langchain-chroma>=0.0.1       # LangChain ChromaDBçµ±åˆ
nltk>=3.8.1                   # è‡ªç„¶è¨€èªå‡¦ç†
pypdf>=3.0.0                  # PDFå‡¦ç†
python-dotenv>=1.0.0          # ç’°å¢ƒå¤‰æ•°ç®¡ç†
fastapi>=0.100.0              # é«˜é€ŸAPIé–‹ç™º
uvicorn>=0.22.0               # ASGI ã‚µãƒ¼ãƒãƒ¼
beautifulsoup4>=4.12.0        # HTML/XML ãƒ‘ãƒ¼ã‚µãƒ¼
chardet>=5.0.0                # æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ¤œå‡º
pytest>=7.0.0                 # ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
pytest-asyncio>=0.21.0        # éåŒæœŸãƒ†ã‚¹ãƒˆ
psutil>=5.9.0                 # ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±
pydantic>=2.0.0               # ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
```

### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé¸å®šç†ç”±
- **ChromaDB 1.0.12**: å®‰å®šç‰ˆã®å›ºå®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ä¸€è²«æ€§ç¢ºä¿
- **numpy 2.2.0+**: æœ€æ–°ã®æ•°å€¤è¨ˆç®—æ©Ÿèƒ½ã‚’æ´»ç”¨
- **FastAPI**: é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãªAPIé–‹ç™º
- **LangChain**: AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµ±åˆ
- **pytestç³»**: åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆç’°å¢ƒ

## ğŸ”§ BB7ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹å•é¡Œã®å®Œå…¨è§£æ±º

### BB7ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®æ­´å²
**å•é¡Œ**: åˆæœŸã®MCPã‚µãƒ¼ãƒãƒ¼å®Ÿè£…ã§ä½¿ç”¨ã•ã‚Œã¦ã„ãŸ`bb7_`ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹
- `bb7_store_text`
- `bb7_search_text`  
- `bb7_stats`
- `bb7_health_check`

### å®Ÿè£…ã—ãŸè§£æ±ºç­–

#### 1. è‡ªå‹•ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/utils/config_helper.py`
```python
def migrate_tool_name(old_name: str) -> str:
    """BB7ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’å‰Šé™¤ã—ã¦ã‚¯ãƒªãƒ¼ãƒ³ãªåå‰ã«å¤‰æ›
    
    Args:
        old_name: æ—§ãƒ„ãƒ¼ãƒ«åï¼ˆbb7_ä»˜ãã®å ´åˆã‚‚ã‚ã‚‹ï¼‰
        
    Returns:
        ã‚¯ãƒªãƒ¼ãƒ³ãªãƒ„ãƒ¼ãƒ«å
    """
    if old_name.startswith("bb7_"):
        return old_name[4:]  # "bb7_"ã‚’é™¤å»
    return old_name

# ä½¿ç”¨ä¾‹
clean_name = migrate_tool_name("bb7_store_text")  # â†’ "store_text"
```

#### 2. å¾Œæ–¹äº’æ›æ€§ã‚µãƒãƒ¼ãƒˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/main_complete.py`
```python
def migrate_bb7_name(name: str) -> str:
    """BB7ãƒ„ãƒ¼ãƒ«åã®å¾Œæ–¹äº’æ›æ€§ã‚µãƒãƒ¼ãƒˆ"""
    return name[4:] if name.startswith("bb7_") else name

# ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—æ™‚ã®è‡ªå‹•å¤‰æ›
if migrated_name == "store_text" or name == "bb7_store_text":
    return await store_text_implementation(text, collection_name, metadata)
elif migrated_name == "search_text" or name == "bb7_search_text":
    return await search_text_implementation(query, collection_name, n_results)
elif migrated_name == "stats" or name == "bb7_stats":
    return await stats_implementation()
```

#### 3. æ®µéšçš„ç§»è¡Œæˆ¦ç•¥
- **Phase 1**: ã‚¯ãƒªãƒ¼ãƒ³ãªåå‰ã®å°å…¥ âœ… å®Œäº†
- **Phase 2**: ä¸¡æ–¹ã®åå‰ã®ä¸¦è¡Œã‚µãƒãƒ¼ãƒˆ âœ… ç¾åœ¨ç¨¼åƒä¸­
- **Phase 3**: BB7ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®æ®µéšçš„å»ƒæ­¢ ğŸ“… è¨ˆç”»ä¸­

#### 4. ãƒ†ã‚¹ãƒˆã§ã®æ¤œè¨¼
**ãƒ•ã‚¡ã‚¤ãƒ«**: `test_global_settings_fixed.py`
```python
def test_tool_name_migration():
    """BB7ãƒ„ãƒ¼ãƒ«åãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ"""
    bb7_names = ["bb7_store_text", "bb7_search_text", "bb7_stats", "regular_tool"]
    expected = ["store_text", "search_text", "stats", "regular_tool"]
    
    for old_name, expected_new in zip(bb7_names, expected):
        migrated = migrate_tool_name(old_name)
        assert migrated == expected_new
        print(f"âœ… {old_name} â†’ {migrated}")
```

## ğŸ‰ æˆæœ

### 1. ã‚·ã‚¹ãƒ†ãƒ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†
- ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸå€¤ã®æ’é™¤
- è¨­å®šã®ä¸€å…ƒç®¡ç†
- å‘½åè¦å‰‡ã®çµ±ä¸€
- ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã«ã‚ˆã‚‹æŸ”è»Ÿæ€§

### 2. ä¿å®ˆæ€§å‘ä¸Š
- ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã«ã‚ˆã‚‹æŸ”è»Ÿãªé‹ç”¨
- ç’°å¢ƒå¤‰æ•°ã§ã®è¨­å®šå¤‰æ›´å¯¾å¿œ
- JSONè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ç®¡ç†
- ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼æ§‹é€ ã«ã‚ˆã‚‹ç‹¬ç«‹æ€§

### 3. å¾Œæ–¹äº’æ›æ€§ç¶­æŒ
- æ—¢å­˜BB7ãƒ„ãƒ¼ãƒ«åã§ã‚‚å‹•ä½œ
- æ®µéšçš„ãªç§»è¡ŒãŒå¯èƒ½
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å½±éŸ¿æœ€å°åŒ–
- è‡ªå‹•å¤‰æ›ã«ã‚ˆã‚‹é€éçš„ãªç§»è¡Œ

### 4. ãƒ‡ãƒ¼ã‚¿çµ±åˆå®Œäº†
- å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å˜ä¸€ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«çµ±åˆ
- ãƒ‡ãƒ¼ã‚¿é‡è¤‡ã®è§£æ¶ˆ
- æ¤œç´¢åŠ¹ç‡ã®å‘ä¸Š
- ã‚·ã‚§ã‚¢ç’°å¢ƒã§ã®åŠ¹ç‡çš„ãªç®¡ç†

### 5. 25ãƒ„ãƒ¼ãƒ«å®Œå…¨å®Ÿè£…
- ç›£è¦–ãƒ»ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†: 5ãƒ„ãƒ¼ãƒ«
- åŸºæœ¬ãƒ‡ãƒ¼ã‚¿æ“ä½œ: 4ãƒ„ãƒ¼ãƒ«
- ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†: 5ãƒ„ãƒ¼ãƒ«
- å±¥æ­´ãƒ»ä¼šè©±: 3ãƒ„ãƒ¼ãƒ«
- åˆ†æãƒ»æœ€é©åŒ–: 3ãƒ„ãƒ¼ãƒ«
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ä¿å®ˆ: 4ãƒ„ãƒ¼ãƒ«
- ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒ†ã‚¹ãƒˆ: 1ãƒ„ãƒ¼ãƒ«

## ğŸ”„ ä»Šå¾Œã®é‹ç”¨

### æ¨å¥¨äº‹é …
1. **æ–°ã—ã„ãƒ„ãƒ¼ãƒ«åã®ä½¿ç”¨**: `store_text`, `search_text`, `stats` ãªã©
2. **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ´»ç”¨**: `src/config/config.json` ã§è¨­å®šå¤‰æ›´
3. **ç’°å¢ƒå¤‰æ•°ã®åˆ©ç”¨**: `MCP_DEFAULT_COLLECTION` ç­‰ã§ã®å‹•çš„è¨­å®š
4. **ã‚·ã‚§ã‚¢ç’°å¢ƒã®æ´»ç”¨**: è¤‡æ•°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–“ã§ã®ãƒ‡ãƒ¼ã‚¿å…±æœ‰

### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥
- BB7ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯æ®µéšçš„ã«å»ƒæ­¢äºˆå®š
- å½“é¢ã¯å¾Œæ–¹äº’æ›æ€§ç¶­æŒ
- æ–°è¦é–‹ç™ºã§ã¯æ–°ãƒ„ãƒ¼ãƒ«åã‚’ä½¿ç”¨
- ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã«ã‚ˆã‚‹æŸ”è»Ÿãªé‹ç”¨

## ğŸ“ æŠ€è¡“ä»•æ§˜

### ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã‚¯ãƒ©ã‚¹
```python
class GlobalSettings:
    """ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šç®¡ç†ã‚¯ãƒ©ã‚¹"""
    
    def __init__(self, config_file="src/config/config.json"):
        self.config_file = config_file
        self.config = self._load_config()
    
    def get_default_collection(self) -> str:
        """ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³åã‚’å–å¾—"""
        env_collection = os.getenv("MCP_DEFAULT_COLLECTION")
        if env_collection:
            return env_collection
        return self.config.get("default_collection", {}).get("name", "sister_chat_history")
    
    def get_database_path(self) -> str:
        """ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ã‚’å–å¾—"""
        env_path = os.getenv("MCP_DATABASE_PATH")
        if env_path:
            return env_path
        return self.config.get("database", {}).get("path", "f:/å‰¯æ¥­/VSC_WorkSpace/IrukaWorkspace/shared_Chromadb/chromadb_data")
```

### ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
```python
def get_default_collection() -> str:
    """ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³åã‚’å–å¾—"""
    settings = GlobalSettings()
    return settings.get_default_collection()

def get_tool_name(base_name: str) -> str:
    """ãƒ„ãƒ¼ãƒ«åã‚’ç”Ÿæˆ"""
    settings = GlobalSettings()
    prefix = settings.config.get("tool_naming", {}).get("prefix", "")
    separator = settings.config.get("tool_naming", {}).get("separator", "_")
    
    if prefix:
        return f"{prefix}{separator}{base_name}"
    return base_name
```

---

**âœ… å…¨ä½œæ¥­ãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸ**  
**ğŸ¯ BB7ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹å•é¡Œã®å®Œå…¨è§£æ±º**  
**âš™ï¸ æŸ”è»Ÿãªã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã‚·ã‚¹ãƒ†ãƒ ã®å°å…¥**  
**ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†**
**ğŸŒ ã‚·ã‚§ã‚¢ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…å®Œäº†**
**ğŸ“¦ 17ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç’°å¢ƒã®æœ€é©åŒ–**
**ğŸ› ï¸ 25ãƒ„ãƒ¼ãƒ«å®Œå…¨å®Ÿè£…ã¨ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼æ§‹é€ åŒ–**
